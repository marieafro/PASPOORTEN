<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
<title>Magic Scroll</title>

<link href="magicscroll/magicscroll.css" rel="stylesheet" type="text/css" media="screen"/>
<script src="magicscroll/magicscroll.js" type="text/javascript"></script>

<style type="text/css">
    
</style>
<script>
    var callbacks = {
        onReady: function () {
            console.log('onReady', arguments[0]);
        },
        onStop: function () {
            console.log('onStop', arguments[0]);
        },
        onItemHover: function () {
            console.log('onItemHover', arguments[0]);
        },
        onItemOut: function () {
            console.log('onItemOut', arguments[0]);
        },
        onMoveStart: function () {
            console.log('onMoveStart', arguments[0]);
        },
        onMoveEnd: function () {
            console.log('onMoveEnd', arguments[0]);
        }
    };

    var MagicScrollOptions = {};
    magicJS.extend(MagicScrollOptions, callbacks);

    function isDefaultOption(o) {
        return magicJS.$A(magicJS.$(o).byTag('option')).filter(function(opt){
            return opt.selected && opt.defaultSelected;
        }).length > 0;
    }

    function toOptionValue(v) {
        if ( /^(true|false)$/.test(v) ) {
            return 'true' === v;
        }
        if ( /^[0-9]{1,}$/i.test(v) ) {
            return parseInt(v,10);
        }
        return v;
    }

    function makeOptions(optType) {
        var  value = null, isDefault = true, newParams = Array(), newParamsS = '', options = {};
        magicJS.$(magicJS.$A(magicJS.$(optType).getElementsByTagName("INPUT"))
            .concat(magicJS.$A(magicJS.$(optType).getElementsByTagName('SELECT'))))
            .forEach(function(param){
                value = ('checkbox'==param.type) ? param.checked.toString() : param.value;

                isDefault = ('checkbox'==param.type) ? value == param.defaultChecked.toString() :
                    ('SELECT'==param.tagName) ? isDefaultOption(param) : value == param.defaultValue;

                if ( null !== value && !isDefault) {
                    options[param.name] = toOptionValue(value);
                }
        });

        magicJS.extend(options, callbacks);
        return options;
    }

    function updateScriptCode() {
        var code = '&lt;script&gt;\nvar MagicScrollOptions = ';
        code += JSON.stringify(MagicScrollOptions, null, 2).replace(/\"(\w+)\":/g,"$1:")+';';
        code += '\n&lt;/script&gt;';

        magicJS.$('app-code-sample-script').changeContent(code);
    }

    function updateInlineCode() {
        var code = '&lt;div class="MagicScroll" data-options="';
        code += JSON.stringify(MagicScrollOptions).replace(/\"(\w+)\":(?:\"([^"]+)\"|([^,}]+))(,)?/g, "$1: $2$3; ").replace(/\{([^{}]*)\}/,"$1").replace(/\s*$/,'');
        code += '"&gt;';

        magicJS.$('app-code-sample-inline').changeContent(code);
    }

    function applySettings() {
        MagicScroll.stop('scroll-1');
        MagicScrollOptions = makeOptions('params');
        MagicScroll.start('scroll-1');
        updateScriptCode();
        updateInlineCode();
        try {
            prettyPrint();
        } catch(e) {}
    }

    function copyToClipboard(src) {
        var
            copyNode,
            range, success;

        if (!isCopySupported()) {
            disableCopy();
            return;
        }
        copyNode = document.getElementById('code-to-copy');
        copyNode.innerHTML = document.getElementById(src).innerHTML;

        range = document.createRange();
        range.selectNode(copyNode);
        window.getSelection().addRange(range);

        try {
            success = document.execCommand('copy');
        } catch(err) {
            success = false;
        }
        window.getSelection().removeAllRanges();
        if (!success) {
            disableCopy();
        } else {
            new magicJS.Message('Settings code copied to clipboard.', 3000,
                document.querySelector('.app-code-holder'), 'copy-msg');
        }
    }

    function disableCopy() {
        magicJS.$A(document.querySelectorAll('.cfg-btn-copy')).forEach(function(node) {
            node.disabled = true;
        });
        new magicJS.Message('Sorry, cannot copy settings code to clipboard. Please select and copy code manually.', 3000,
            document.querySelector('.app-code-holder'), 'copy-msg copy-msg-failed');
    }

    function isCopySupported() {
        if ( !window.getSelection || !document.createRange || !document.queryCommandSupported ) { return false; }
        return document.queryCommandSupported('copy');
    }
</script>
</head>
<body>
<div class="preview col">
    <div class="api-controls">
        <button class="cfg-btn" onclick="MagicScroll.start('scroll-1')">Start</button>
        <button class="cfg-btn" onclick="MagicScroll.stop('scroll-1')">Stop</button>
        <button class="cfg-btn" onclick="MagicScroll.refresh('scroll-1')">Refresh</button><span class="sep"></span>
        <button class="cfg-btn" onclick="MagicScroll.backward('scroll-1')">Backward</button>
        <button class="cfg-btn" onclick="MagicScroll.forward('scroll-1')">Forward</button>
        <button class="cfg-btn" onclick="MagicScroll.play('scroll-1', 100)">Play</button>
        <button class="cfg-btn" onclick="MagicScroll.pause('scroll-1')">Pause</button>
    </div>

    <div class="app-figure" id="zoom-fig">
        <div class="MagicScroll" id="scroll-1">
            <a><img
                srcset="images/ustest.png 2x" src="images/ustest.png" />America</a>
            <a><img
                srcset="images/bangladesh.png 2x" src="images/bangladesh.png" />Bangladesh</a>
            <a><img
                srcset="images/alger.png 2x" src="images/alger.png" />Alger</a>
            <a><img
                srcset="images/denmark.png 2x" src="images/denmark.png" />Denmark</a>
            <a><img
                srcset="images/france.png 2x" src="images/france.png" />France</a>
            <a><img
                srcset="images/nl.png 2x" src="images/nl.png" />Netherlands</a>
            <a><img
                srcset="images/iceland.png 2x" src="images/iceland.png" />Iceland</a>
            <a><img
                srcset="images/romania 2x" src="images/romania.png" />Romania</a>
            <a><img
                srcset="images/swiss 2x" src="images/swiss.png" />All Star Red</a>
        </div>
    </div>

    <div class="app-code-sample">
        <input type="radio" name="code-sample-nav" id="code-sample-nav-1" checked="checked"><label for="code-sample-nav-1">Global settings</label
        ><input type="radio" name="code-sample-nav" id="code-sample-nav-2"><label for="code-sample-nav-2">Inline settings</label>
        <div class="app-code-holder">
            <div>
                <pre class="prettyprint" id="app-code-sample-script">
                    &lt;script&gt;
                    var MagicScrollOptions = {};
                    &lt;/script&gt;
                </pre>
                <button class="cfg-btn cfg-btn-copy" autocomplete="off" onclick="copyToClipboard('app-code-sample-script')">Copy</button>
            </div>
            <div>
                <pre class="prettyprint" id="app-code-sample-inline">
                    &lt;div class="MagicScroll" data-options=""&gt;
                </pre>
                <button class="cfg-btn cfg-btn-copy" autocomplete="off" onclick="copyToClipboard('app-code-sample-inline')">Copy</button>
            </div>
        </div>
    </div>
</div>
</div>
<div id="code-to-copy"></div>
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.css">
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prettify/188.0.0/prettify.min.js"></script>
<script>try { prettyPrint(); } catch(e) {}</script>
</body></html>